
–ë—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –ø–∞–∫–µ—Ç—ã, –Ω–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å—ã–ª–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä, –∏ –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å—ã–ª–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç.
![[Pasted image 20250915114659.png]]
![[Pasted image 20250915114733.png]]
–ë—ã–ª –Ω–∞–π–¥–µ–Ω —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞ –º–µ—Ç–æ–¥–æ–º —Ç—ã–∫–∞, —Å –ø–æ—Å—ã–ª–∞–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–æ–º –ø–∞–∫–µ—Ç–æ–≤ —Å —Ñ–æ—Ä–º–∞—Ç–æ–º lol[|999|WuAlSdDr|]kek
–≥–¥–µ 999 - –∫–æ–ª-–≤–æ –∑–≤—ë–∑–¥
![[Pasted image 20250915115147.png]]
WuAlSdDr - WASD - –∫–Ω–æ–ø–∫–∏, uldr - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è up, left, down, right

–ö–ª–∏–µ–Ω—Ç –∂–µ –ø–æ—Å—ã–ª–∞–ª –ø–∞–∫–µ—Ç—ã –≤–∏–¥–∞  lol[w+a+s+d+++]kek, –≥–¥–µ wasd - –Ω–∞–∂–∞—Ç—ã–µ –∫–ª–∞–≤–∏—à–∏
![[Pasted image 20250915115402.png]]

–í–æ—Ç —Ç–∞–∫–∏–º–∏ —Ç–µ–º–ø–∞–º–∏ –±—ã–ª–æ —Ä–µ—à–µ–Ω–æ –ø–æ–¥–Ω—è—Ç—å –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–ª –ø–∞–∫–µ—Ç—ã —Å–µ—Ä–≤–∞, —Ä–µ–¥–∞–∫—Ç–∏–ª –∏—Ö –Ω–∞ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ–µ WuAlSdDr, —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç –ø–æ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏ —ç—Ç–æ –¥–µ–ª–æ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–ª, –∏ —Ä–µ–¥–∞–∫—Ç–∏–ª –ø–∞–∫–µ—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞, —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ—Å—ã–ª–∞–ª–∞—Å—å —Ç–∞ –∫–Ω–æ–ø–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ –º–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –Ω—É–∂–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä –ø–æ—Å–ª–∞–Ω–æ WrAdSrDu, –∫–ª–∏–µ–Ω—Ç –¥–≤–∏–∂–µ—Ç—Å—è –ø–æ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏ –≤–≤–µ—Ä—Ö, —Ö–æ—á–µ—Ç –ø–æ—Å–ª–∞—Ç—å w, –Ω–æ —ç—Ç–æ –¥–µ–ª–æ –ª–æ–≤–∏–º, —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ–º, —á—Ç–æ —á—Ç–æ–±—ã –∏–¥—Ç–∏ –≤–≤–µ—Ä—Ö, –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å d, –∑–∞–º–µ–Ω—è–µ–º –≤ –ø–∞–∫–µ—Ç–µ w –Ω–∞ d.
![[Pasted image 20250915120613.png]]
–ü–æ—Ç–æ–º –∑–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç —Ä—É—á–∫–∞–º–∏ –ø—Ä–æ—Ö–æ–¥–∏–º. –ù–æ –ª—É—á—à–µ –º–Ω–æ–≥–æ –∫–Ω–æ–ø–æ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –Ω–∞–∂–∏–º–∞—Ç—å, —Ç–∫ –≤—Å–µ –±—É–¥—É—Ç –º–µ–Ω—è—Ç—å—Å—è –Ω–∞ –æ–¥–Ω—É, –ø–æ–π–¥—ë—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω —Å —Å–µ—Ä–≤–µ—Ä–æ–º

–ù–∞–≤–∞–π–±–∫–æ–∂–µ–Ω–æ, –∫–æ–Ω–µ—á–Ω–æ, –Ω–æ –ª–æ–≥–∏–∫—É –ø–æ–¥–º–µ–Ω—ã –ø—Ä–∏—à–ª–æ—Å—å —Å–∞–º–æ–º—É –¥–µ–ª–∞—Ç—å
~~~ python
#!/usr/bin/env python3
import socket
import threading
import select
import re
import time
import random

class WinningProxy:
    def __init__(self, listen_port, target_host, target_port):
        self.listen_port = listen_port
        self.target_host = target_host
        self.target_port = target_port
        self.current_stars = 472
        self.stars_modified = False
        self.win_sequence = []
        self.serv_move = "" 
        
    def generate_win_sequence(self):
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—ã–∏–≥—Ä—ã—à–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏–π"""
        sequences = [
            "++++++",
            "d+d+d+", 
            "a+a+a+",  
            "w+w+w+", 
            "s+s+s+",
        ]
        return random.choice(sequences)
    
    def optimize_movements(self, movement_code):
        """–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –¥–≤–∏–∂–µ–Ω–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø–æ–±–µ–¥—ã"""
        if movement_code != "WuAlSdDr":
            return "WuAlSdDr"
        return movement_code
    
    def client_move(self, pressed):
        """–ü–æ–¥–º–µ–Ω—è–µ–º –Ω–∞–∂–∞—Ç—É—é –∫–ª–∞–≤–∏—à—É –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É –∏–∑ serv_move.
           –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–Ω–æ–ø–∫—É (w/a/s/d), –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å pressed."""
        if not self.serv_move or len(self.serv_move) < 8:
            return pressed  # –ï—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞, –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ–º
        
        good = 'WuAlSdDr'
        print(f'Original: {self.serv_move}')
        ans = "d"
        dr = ""
        pressed = pressed.lower()
        print(f'Pressed: {pressed}')
        

        if pressed == self.serv_move[0].lower():
            dr = good[1]
        if pressed == self.serv_move[2].lower():
            dr = good[3]
        if pressed == self.serv_move[4].lower():
            dr = good[5]
        if pressed == self.serv_move[6].lower():
            dr = good[7]
        print(f'DR: {dr}')
        for i in range(8):
            if(dr == self.serv_move[i]):
                ans = self.serv_move[i - 1].lower()
                print(f'Match: {dr}::{self.serv_move[i]}')
        
        print(f'Returned: {ans}')
        return ans
        
    def modify_server_response(self, data):
        """–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞"""
        try:
            text = data.decode('utf-8', errors='ignore')
            
            # –ò—â–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥
            star_match = re.search(r'lol\{[^}]+\}\|(\d+)\|', text)
            if star_match:
                self.current_stars = int(star_match.group(1))
                print(f"‚òÖ Stars: {self.current_stars}")
                
                if not self.stars_modified and self.current_stars <= 472:
                    modified_text = text.replace(
                        f"|{self.current_stars}|", 
                        "|1|"
                    )
                    self.stars_modified = True
                    print(f"‚òÖ SET STARS TO 1")
                    return modified_text.encode('utf-8')
            
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
            movement_match = re.search(r'\|([WASDwasdulr]+)\|', text)
            if movement_match:
                self.serv_move = movement_match.group(1)
                print(f"üéÆ Server movement pattern: {self.serv_move}")
                
                optimized_code = self.optimize_movements(self.serv_move)
                if optimized_code != self.serv_move:
                    modified_text = text.replace(
                        f"|{self.serv_move}|",
                        f"|{optimized_code}|"
                    )
                    print(f"üéÆ Optimized movements: {self.serv_move} ‚Üí {optimized_code}")
                    return modified_text.encode('utf-8')
                    
        except Exception as e:
            print(f"Modify error: {e}")
            
        return data
        
    def modify_client_commands(self, data):
        """–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—ã –∫–ª–∏–µ–Ω—Ç–∞.
           –í—ã–≤–æ–¥–∏–º –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –ø–∞–∫–µ—Ç—ã –∏, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ–¥–º–µ–Ω—è–µ–º –Ω–∞–∂–∞—Ç—É—é –∫–ª–∞–≤–∏—à—É."""
        try:
            text = data.decode('utf-8', errors='ignore')
        except Exception:
            # –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞—Å–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å ‚Äî –ø–µ—á–∞—Ç–∞–µ–º raw bytes –∏ –Ω–µ –º–µ–Ω—è–µ–º
            print(f"üì¶ Raw client packet (bytes): {data!r}")
            return data

        # –û—Ç–ª–∞–¥–∫–∞: –≤—ã–≤–æ–¥–∏–º –í–°–ï –≤—Ö–æ–¥—è—â–∏–µ –ø–∞–∫–µ—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞
        print(f"üì¶ Raw client packet: {repr(text)}")

        try:
            # –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ —Ñ–æ—Ä–º–∞—Ç lol[...]kek
            m = re.search(r'lol\[(.*?)\]kek', text)
            pressed_key = None
            original_fragment = None
            if m:
                original_fragment = m.group(1)
                # –ò—â–µ–º –≤–Ω—É—Ç—Ä–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –ø–µ—Ä–≤—É—é –∫–ª–∞–≤–∏—à—É w/a/s/d
                for key in ['w', 'a', 's', 'd']:
                    if key in original_fragment:
                        pressed_key = key
                        break
            else:
                # –ï—Å–ª–∏ –Ω–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∞ lol[...]kek, –ø—Ä–æ—Å—Ç–æ –∏—â–µ–º –ø–µ—Ä–≤—É—é –≤—Å—Ç—Ä–µ—á–µ–Ω–Ω—É—é –∫–ª–∞–≤–∏—à—É –≤ —Ç–µ–∫—Å—Ç–µ
                for key in ['w', 'a', 's', 'd']:
                    if key in text:
                        pressed_key = key
                        break

            if pressed_key and self.serv_move:
                # –ü–æ–¥–º–µ–Ω—è–µ–º –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É
                converted_key = self.client_move(pressed_key)
                # –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–º–µ–Ω—É: –µ—Å–ª–∏ –±—ã–ª —Ñ–æ—Ä–º–∞—Ç lol[...]kek ‚Äî –∑–∞–º–µ–Ω–∏–º –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ,
                # –∏–Ω–∞—á–µ –æ—Ç–ø—Ä–∞–≤–∏–º —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç lol[x]kek
                if m:
                    
                    myp = original_fragment.replace(pressed_key, converted_key)
                    simplified = text.replace(f"lol[{original_fragment}]kek", f"lol[{myp}]kek")
                else:
                    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞–∫–µ—Ç
                    simplified = f"lol[{converted_key}]kek"

                # –õ–æ–≥–∏—Ä—É–µ–º –∏—Å—Ö–æ–¥–Ω—É—é –∏ –ø–æ–¥–º–µ–Ω—ë–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—ã
                print(f"üéØ Client pressed: {pressed_key} | Sent as: {converted_key}")
                print(f"    {text}  ‚Üí  {simplified}")

                return simplified.encode('utf-8')
            else:
                # –ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ–º, –Ω–æ –ª–æ–≥–∏—Ä—É–µ–º –ø—Ä–∏—á–∏–Ω—É
                if not pressed_key:
                    print("‚ö™ No movement key found in client packet ‚Äî leaving unchanged.")
                elif not self.serv_move:
                    print("‚ö™ No serv_move known yet ‚Äî cannot convert, leaving unchanged.")
                print(f"    Returned as-is: {text}")
        except Exception as e:
            print(f"Command modify error: {e}")

        return data
    
    def handle_client(self, client_socket):
        try:
            server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            server_socket.settimeout(3)
            server_socket.connect((self.target_host, self.target_port))
            print("‚úÖ Connected to game server")
            
            sockets = [client_socket, server_socket]
            
            while True:
                readable, _, errors = select.select(sockets, [], sockets, 1.0)
                
                if errors:
                    break
                    
                for sock in readable:
                    try:
                        data = sock.recv(4096)
                        if not data:
                            return
                            
                        if sock is client_socket:
                            optimized_data = self.modify_client_commands(data)
                            server_socket.send(optimized_data)
                            
                        else:
                            optimized_data = self.modify_server_response(data)
                            client_socket.send(optimized_data)
                            
                    except socket.error:
                        return
                        
        except Exception as e:
            print(f"‚ùå Connection error: {e}")
        finally:
            try:
                client_socket.close()
            except Exception:
                pass
            try:
                server_socket.close()
            except Exception:
                pass
            print("Connection closed")
    
    def start(self):
        server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        server.bind(('0.0.0.0', self.listen_port))
        server.listen(5)
        
        print(f"üéÆ Winning Proxy started on port {self.listen_port}")
        print("üöÄ Will convert client movements to server format")
        
        try:
            while True:
                client_socket, addr = server.accept()
                print(f"üë§ New player: {addr}")
                
                thread = threading.Thread(target=self.handle_client, args=(client_socket,))
                thread.daemon = True
                thread.start()
                
        except KeyboardInterrupt:
            print("\nüõë Shutting down...")
        finally:
            server.close()

if __name__ == "__main__":
    proxy = WinningProxy(30037, "jetski-455wf7wv.alfactf.ru", 30036)
    proxy.start()
~~~